!function(){"use strict";function t(t,e){t.state("Home",{url:"/",templateUrl:"views/Home.html",controller:"HomeController"}).state("Register",{url:"/Register",templateUrl:"views/register.html",controller:"registerCtrl"}),e.otherwise("/")}angular.module("app",["ui.router"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e,o){function r(){e.login(s.user).then(function(){o.go("Home")})}var s=this;s.photo=[],s.status=e.status,s.user={},s.login=r,s.deletePhoto=function(e){t.deletePhoto(e).then(function(t){console.log(t)})},s.addPhoto=function(){t.addNewPhoto(s.photoinfo).then(function(t){console.log("posted photo"),s.photo.push(t)})},t.getPhotos().then(function(t){s.photo=t})}angular.module("app").controller("HomeController",t),t.$inject=["HomeFactory","userFactory","$state"]}(),function(){"use strict";function t(t,e){var o=this;o.user={},o.status=t.status,o.logout=t.logout}angular.module("app").controller("navbarCtrl",t),t.$inject=["userFactory","$state"]}(),function(){"use strict";function t(t,e){function o(){var o=r.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void t.register(o).then(function(){e.go("Home")}):!1}var r=this;r.user={},r.status=t.status,r.register=o}angular.module("app").controller("registerCtrl",t),t.$inject=["userFactory","$state"]}(),function(){"use strict";function t(t,e){var o={};return o.photos=[],o.addNewPhoto=function(r){var s=e.defer();return t.post("/api/addPhoto",{photoURL:r}).success(function(t){o.photos.push(r),s.resolve(t)}).error(function(t){s.reject(t)}),s.promise},o.deletePhoto=function(r){var s=e.defer();return t.post("/api/deletePhoto/"+r._id).success(function(t){s.resolve(o.photos)}),s.promise},o.getPhotos=function(){var o=e.defer();return t.get("/api").success(function(t){o.resolve(t)}),o.promise},o}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e,o){function r(o){var r=e.defer();return t.post("/api/Users/Register",o).success(function(t){u(t.token),l.status.isLoggedIn=!0,r.resolve()}).error(function(t){console.error(t)}),r.promise}function s(o){var r={username:o.username.toLowerCase(),password:o.password},s=e.defer();return t.post("/api/Users/Login",r).success(function(t){u(t.token),l.status.isLoggedIn=!0,s.resolve()}),s.promise}function n(){l.status.isLoggedIn=!1,i()}function u(t){localStorage.setItem("token",t),l.status.username=c()}function a(){return localStorage.token}function i(){localStorage.removeItem("token"),l.status.username=null}function c(){return JSON.parse(atob(a().split(".")[1])).username}var l={};return l.status={},a()&&(l.status.isLoggedIn=!0,l.status.username=c()),l.setToken=u,l.getToken=a,l.removeToken=i,l.register=r,l.login=s,l.logout=n,l}angular.module("app").factory("userFactory",t),t.$inject=["$http","$q","$state"]}();