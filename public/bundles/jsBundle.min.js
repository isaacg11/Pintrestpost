!function(){"use strict";function e(e,o){e.state("Home",{url:"/",templateUrl:"views/login.html",controller:"navBarController"}).state("Photo",{url:"/Photo",templateUrl:"views/Home.html",controller:"HomeController"}).state("Register",{url:"/Register",templateUrl:"views/register.html",controller:"navBarController"}),o.otherwise("/")}angular.module("app",["ui.router"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,o){var t=this;t.addPhoto=function(){e.addNewPhoto(t.photoinfo).then(function(){o.reload()})},e.getPhotos().then(function(e){t.photo=e})}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory","$state"]}(),function(){"use strict";function e(e,o){function t(){var t=n.user;return t.username&&t.email&&t.password&&t.cpassword&&t.password===t.cpassword?void e.register(t).then(function(){o.go("Home")}):!1}function r(){console.log("reached the login func. in navBarController"),e.login(n.user).then(function(){o.go("Photo")})}var n=this;n.user={},n.status=e.status,n.register=t,n.login=r,n.logout=e.logout}angular.module("app").controller("navBarController",e),e.$inject=["userFactory","$state"]}(),function(){"use strict";function e(e,o){var t={};return t.addNewPhoto=function(t){var r=o.defer();return e.post("/api/addPhoto",{photoURL:t}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},t.getPhotos=function(){var t=o.defer();return e.get("/api").success(function(e){console.log(e),t.resolve(e)}).error(function(e){t.reject(e),console.log("bad")}),t.promise},t}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,o){function t(t){var r=o.defer();return e.post("/api/Users/Register",t).success(function(e){s(e.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(e){console.error(e)}),r.promise}function r(t){var r={username:t.username.toLowerCase(),password:t.password},n=o.defer();return e.post("/api/Users/Login",r).success(function(e){s(e.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){c.status.isLoggedIn=!1,a()}function s(e){localStorage.setItem("token",e),c.status.username=i()}function u(){return localStorage.token}function a(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(u().split(".")[1])).username}var c={};return c.status={},u()&&(c.status.isLoggedIn=!0,c.status.username=i()),c.setToken=s,c.getToken=u,c.removeToken=a,c.register=t,c.login=r,c.logout=n,c}angular.module("app").factory("userFactory",e),e.$inject=["$http","$q"]}();