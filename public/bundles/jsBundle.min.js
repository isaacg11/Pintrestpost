!function(){"use strict";function e(e,t){e.state("Home",{url:"/",templateUrl:"views/home.html",controller:"HomeController"}).state("Register",{url:"/Register",templateUrl:"views/register.html",controller:"navBarController"}),t.otherwise("/")}angular.module("app",["ui.router"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t){var o=this;o.addPhoto=function(){e.addNewPhoto(o.photoinfo).then(function(){t.reload()})},e.getPhotos().then(function(e){o.photo=e})}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory","$state"]}(),function(){"use strict";function e(e,t){function o(){console.log("reached the register func. in navBarController");var o=n.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void e.register(o).then(function(){t.go("Home")}):!1}function r(){e.login(n.user).then(function(){t.go("Home")})}var n=this;n.user={},n.status=e.status,n.register=o,n.login=r,n.logout=e.logout}angular.module("app").controller("navBarController",e),e.$inject=["userFactory","$state"]}(),function(){"use strict";function e(e,t){var o={};return o.addNewPhoto=function(o){var r=t.defer();return e.post("/api/addPhoto",{photoURL:o}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},o.getPhotos=function(){var o=t.defer();return e.get("/api").success(function(e){console.log(e),o.resolve(e)}).error(function(e){o.reject(e),console.log("bad")}),o.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){function o(o){var r=t.defer();return e.post("/api/Users/Register",o).success(function(e){s(e.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(e){console.error(e)}),r.promise}function r(o){var r={username:o.username.toLowerCase(),password:o.password},n=t.defer();return e.post("/api/Users/Login",r).success(function(e){s(e.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){c.status.isLoggedIn=!1,a()}function s(e){localStorage.setItem("token",e),c.status.username=i()}function u(){return localStorage.token}function a(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(u().split(".")[1])).username}var c={};return c.status={},u()&&(c.status.isLoggedIn=!0,c.status.username=i()),c.setToken=s,c.getToken=u,c.removeToken=a,c.register=o,c.login=r,c.logout=n,c}angular.module("app").factory("userFactory",e),e.$inject=["$http","$q"]}();